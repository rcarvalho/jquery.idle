(function(e){e.fn.idle=function(t){var n={preIdle:3e4,idle:6e4,events:"keypress mousemove DOMMouseScroll mousewheel mousedown touchstart touchmove",onPreIdle:function(){},onIdle:function(){},onActive:function(){}};var r=0;var i=[];var s=e.extend({},n,t);var o=function(e){while(id=i.pop()){clearTimeout(id)}if(r>0){e.onActive.call()}r=0;u(e)};var u=function(e){id1=setTimeout(function(){if(r<1){r=1;e.onPreIdle.call()}},e.preIdle);i.push(id1);id2=setTimeout(function(){if(r==1){r=2;e.onIdle.call()}},e.idle);i.push(id2)};return this.each(function(){u(s);e(this).bind(s.events,function(e){o(s)})})}})(jQuery)